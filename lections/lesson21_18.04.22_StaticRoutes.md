# Принципы маршрутизации. Статическая маршрутизация

Существуют 2 функции маршрутизатора: выбор наилучшего маршрута для пересылки пакетов и сама пересылка.
РАссмотрим вопрос выбора наилучшего маршрута.

## Выбор наилучшего маршрута

Наилучший путь для маршрутизатора - это путь, дающий в таблице маршрутизации самое длинное совпадение с адресом назначения.

Для примера возьмем пакет IPv4 имеет с адресом назначения IPv4 172.16.0.10. Маршрутизатору доступно три возможных маршрута, совпадающих с этим пакетом — 172.16.0.0/12, 172.16.0.0/18 и 172.16.0.0/26. Маршрут 172.16.0.0/26 имеет самое длинное совпадение, поэтому для пересылки пакета выбирается именно этот маршрут. Для того, чтобы эти маршруты рассматривались как совпадающие, необходимо минимальное количество совпадающих битов, указанное маской подсети маршрута.

172.16.0.10     **10101100.00010000.000000000000.00001010**

172.16.0.0/12  **10101100.0001**00000000000000.00001010

172.16.0.0/18  **10101100.00010000.00**000000.00001010

172.16.0.0/26  **10101100.00010000.00000000.00**001010

## Построение таблицы маршрутизации

1. Непосредственно подключенная сеть добавляется в таблицу маршрутизации, когда интерфейс настроен с IP-адресом и маской подсети (длина префикса) и активен (up и up).
2. Удаленные сети:сети, не подключенные напрямую к маршрутизатору. Маршрутизатор получает сведения об удаленных сетях двумя способами:
- Статические маршруты - добавляются в таблицу маршрутизации, когда маршрут настраивается вручную.
- Протоколы динамической маршрутизации - добавляются в таблицу маршрутизации, когда протоколы маршрутизации динамически узнают о удаленной сети.
- Маршрут по умолчанию: определяет маршрутизатор следующего перехода, который будет использоваться, если таблица маршрутизации не содержит определенного маршрута, соответствующего IP-адресу назначения. Маршрут по умолчанию может быть введен вручную как статический маршрут или автоматически изучен через протокол динамической маршрутизации. Маршрут по умолчанию имеет длину префикса /0. Длина префикса /0 указывает на то, что нет битов, которые должны соответствовать IP-адресу назначения для этого маршрута. Если нет маршрутов с совпадением длиннее 0 бит, для пересылки пакета используется маршрут по умолчанию.
