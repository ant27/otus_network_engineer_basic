## Занятие 2. Физический уровень. Модель OSI 

Дата занятия: 04.03.21

###  Модуль 2 Cisco CCNA. Базовая конфигурация коммутатора и оконечного устройства.

#### Базовая настройка маршрутизатора.

Базовая настройка маршрутизатора практически совпадаетс с базовой настройкой коммутатора.
Но есть пара особенностей:
- порты маршрутизатора по умолчанию выключены и после настройки их нужно обязательно включить командой **no shutdown**
- физическим интерфейсам маршрутизатора можно и нужно задавать IP-адреса (в отличие от коммутатора, которому можно задать ip-адрес только виртуального интерфейса SVI) следующим образом
```
R1>enable
R1#config terminal
R1(config)#interface ge0/0/1
R1(config-if)#description Link to LAN
R1(config-if)#ip address 192.168.10.1 255.255.255.0
R1(config-if)#ipv6 address 2001:db8:acad:10::1/64
R1(config-if)#no shutdown
```

#### Команды просмотра настройки, состояния и статистики интерфейсов.

- Просмотр состояния интерфейсов
```
R1>enable
R1#show ip interface brief
R1#show ipv6 interface brief
```
- Просмотр статистики интерфейсов
```
R1>enable
R1#show interfaces
R1#show ip interfaces
R1#show ipv6 interfaces
```
- Просмотр таблицы маршрутизации сетевого устройства
```
R1>enable
R1#show ip route
R1#show ipv6 route 
```
- Настройка шлюза по умолчанию на коммутаторе:
```
S1>enable
S1#configure terminal
S1(config)#ip default-gateway 192.168.1.70
S1(config)#exit
S1(config)#
```

#### Принципы сетевых уровней. Физический уровень.

Существует 2 главных принципа сетевых уровней модели OSI.
Это абстракция и инкапсуляция.
Благодаря абстракции каждый уровень модели работает со своими сущностями - кадрами, сегментами, пакетами и ничего не знает про сущности на других уровнях.
Благодаря инкапсуляции передаваемые пользовательские данные на каждом уровню "обертываются" в соотвествующие слои для правильной передачи на данном уровне, а в конечном пункте производится деинкапсуляция. 

Инкапсуляция для пакета стека Ethernet/TCP/IP:
- Данные (Data)
- Сегмент протокола TCP
- IP пакет
- Кадр протокола Ethernet
- Набор электромагнитных импульсов, передающихся в физической среде между двумя NIC (Network Interface Card).

#### Уровни модели OSI

- Физический (среда передачи - витая пара, оптика)
- Канальный (протокол ethernet)
- Сетевой (протокол IP)
- Транспортный (протокол TCP)

#### Физический уровень модели OSI
1. Стандарты физического уровня уровня описывают:
- стандарты аппаратных компонентов
- кодирование сигнала (формат преобразования потока битов в формат, узнаваемый следующим устройством в сетевом пути, например, манчестерский код 4B/5B, 8B/10B)
- способы передачи сигналов

2. Методы сигнализации (способа передачи уровня битового 0 и 1)

-уровнем напряжения
-амплитудной модуляцией
-частотной модуляцией
-фазовой модуляцией

#### Полоса пропускания (bandwidth)

Полоса пропускания (пропускная сопсобность) - максимальный объем данных, который можно передать из одной точки в другую за определенное время.

Единицы пропускной способности: бит/с, Кбит/с, Мбит/с, Гбит/с, Тбит/с.

Задержка - количество времени, затрачиваемое на перемещение данных из из одной заданной точки в другую (преимущественно от одной сетевой карты до другой).
Задержку на интерфейсе можно посмотреть командой **show interfaces** - параметр **DLY**

Полезная пропускная способность (Goodput) - пропускная способность за вычетом накладных расходов на трафик (служебные данные)

#### Медная среда передачи

- Неэкранированная витая пара (UTP 8P/8C) разных категорий
- Экранированная витая пара  (STP 8P/8C) разных категорий
- Коаксиальный кабель

Типы коннекторов коаксиальных кабелей: NBC, N-type, F-type.

Особенности кабеля UTP: 
- шаг скручивания разных пар различаются для ограничения перекрестных помех.
- каждый провод в паре использует противоположную полрность для компенсации помех.

Стандарты UTP-кабелей:

- Категория 3 - 4х-жильный
- Категория 5 - 8-жильный (4х-парный) кабель с пропускной сопсобностью 100 Мбит/с
- Категория 5e - 8-жильный (4х-парный) кабель с пропускной сопсобностью до 1 Гбит/с
- Категория 6 - 8-жильный (4х-парный) кабель с экранированием каждой пары с пропускной сопсобностью 1 Гбит/с.

Стандарты последовательности жил в разъемах RJ-45 витой пары:
- Т568**А** - БЗ, З, БО, С, БС, О, БК, К
- Т568**B** - БО, О, БЗ, С, БС, З, БК, К
Примечание: при обжимке наиболее распространен стандарт Б

Прямая и перекрестная обжимка - устаревший способ соединения сетевых интерфейсов разных устройств:
- Прямой кабель - оба конца обжаты по А или Б стандарту - соединения конечного узла с сетевым устройством (разных типов устройств).
- Перекрестный кабель - один конец кабеля по А, другой по Б - соединения хост-хост, коммутатор-коммутатор, маршрутизатор-маршрутизатор (одинаковых типов устройств). 

Примечание: в данный момент подавляющее большинство сетевых карт используют Auto-MDIX для определения типа кабеля (однако при отключении данной функции на интерфейсе коммутатора возможно будут проблемы)








##### Состав операционной системы:
- Оборудование (hardware) - физические компоненты компьютера 
- Ядро (kernel) - часть ОС, обеспечивающая взаимодействие аппаратных средств и ПО компьютера.
- Оболочка (shell) - пользовательский интерфейс, позволяющий пользователю запрашивать определенные задачи от компьютера.

##### Способы доступа:

- Консоль - физический порт управления, используемый для доступа к устройству для обслуживания.
- Secure Shell (SSH) - протокол безопасного подключения посредством CLI через виртуальный интерфейс по сети.
- Telnet - протокол небезопасного подключения посредством CLI. Устарел и практически не используется.

##### Программы эмуляции терминала:

- PuTTY
- Tera Term
- SecureCRT

##### Основные режимы команд:

- Пользовательский режим (урезанный, только просмотр конфигурации, проверка сетевой связности)
- Привилегированный (полный доступ)
```
S1>enable
S1#
```
- Режим глобальной конфигурации
```
S1#configure terminal
S1(config)#
```
- Режим конфигурации линии - 

```
S1#line console 0
S1(config-line)#
```

- Режим конфигурации интерфейса - 

```
S1#interface vlan1
S1(config-if)#
```

Примечание: для выхода из режима подконфигурации используется команда **exit**. Для выхода из режима глобальной конфигурации в приливегированный режим используется команда **end** или сочетание клавиш **Ctrl+Z**.

##### Использование контекстной справки.

Контекстная справка выводится при введении в терминале символа **?**. Клавишу **Enter** вводить не требуется.

- Вывод информации о всех возможных для ввода команд в данном режиме:

`S1#?`

- Вывод информации о возможных для ввода на данной позиции параметров для команды:

`S1#clock ?`

Примечание: 

В случае ввода правильного, но незавершенного текста команды и ее параметров, выводится диагностическое сообщение **incomplete command**. 

В случае ввода неправильного текста команды и ее параметров выводится диагностическое сообщение **invalid input** с указанием позиции начала неправильного текста.

Можно вводить укороченные команды, но количество введенных символов команды должно однозначно указывать ОС, какая команда введена, иначе будет выведена ошибка **Ambiguous command**.

###### Прерывание выполнения команд

**Ctrl+Z**

**Ctrl+Shift+6**

###### Базовая настройка устройств.

Настройка имени устройства:

```
S1>enable
S1#configure terminal
S1(config)#hostname SW1
```

Возвращение к настройке имени узла по умолчанию:

`S1(config)#no hostname`

Примечание: имя узла может начинаться только с буквы, содержать только буквы, цифры и тире.

Настройка пароля для доступа в консоль:

```
S1>enable
S1#configure terminal
S1(config)#line console 0
S1(config-line)#password cisco
```

Примечание: команда **password** настраивает пароль для входа в консоль, но не включает запрос его ввода.

`S1(config-line)#login`

Примечание: команда **login** включает запрос ввода пароля при входе в консоль.
```
S1(config-line)#end
S1#
```
Настройка пароля для доступа в привилегированный режим:

```
S1>enable
S1#configure terminal
S1(config)#enable secret class
S1(config-line)#exit
S1#
```

- Настройка подключения по виртуальному терминалу vty (удаленных подключний):

```
S1>enable
S1#configure terminal
R1#line vty 0 4
```
- Примечание: всего одновременных удаленных подключений может быть 16. По умолчанию они отключены. Команда выше включает 5 из них, то есть на устройстве возможн до 5 одновременных подключений.

```
R1#password cisco
R1#login
R1#exit
```

- Зашифровка пароля для неотображения его в явном виде в конфигурации:

`R1#service password-encryption`

- Отображение текущей конфигурации:

`S1>show running-config`

- Настройка приветственного баннера:

`R1#banner motd $ Authorized Access Only! $`

- Сохранение текущей конфигурации в загрузочную конфигурацию:

`R1#copy running-config startup-config`

Или

`R1#write memory`

- Удаление загрузочной конфигурации:

`R1#erase startup-config`

- Перезагрузка устройства:

`R1#reload`

- Настройка IP адреса виртуального интерфейса коммутатора для (SVI) для удаленного доступа по сети:

```
S1>enable
S1#configure terminal
S1(config)#interface vlan1
S1(config-if)#ip address 192.168.1.20 255.255.255.0
S1(config-if)#no shutdown
S1(config-if)#exit
S1(config)#
```
