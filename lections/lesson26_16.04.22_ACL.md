# Списки контроля доступа ACL.

Список контроля доступа (ACL) — это последовательный список разрешающих или запрещающих операторов, называемых записями списка контроля доступа (ACE).

## Принцип обработки правил ACE

При прохождении сетевого трафика через интерфейс, где действует список контроля доступа (ACL), маршрутизатор *последовательно* сопоставляет информацию из пакета с каждой записью в списке контроля доступа на предмет соответствия, начиная с самой первой. Первая запись, условия которой соотвествуют проверяемому пакету, применяется к нему, остальные записи, ниже в списке, уже не используются. Если запись не подходит по условию, то пакет проверяется дальше по списку.

*Примечание: Последней записью ACL-списка всегда является косвенный отказ, блокирующий весь трафик. Он скрыт и не отображается в конфигурации. Поэтому ACL должен иметь по крайней мере одну инструкцию разрешения, иначе весь трафик будет отклонен из-за неявного оператора deny ACE.

## Важная функция ACL

Кроме обеспечения фильтрации траффика одной из важных функций ACL является маркировка траффика. Например, можно определить диапазон IP адресов, описав его в ACL, а потом применить этот список к протоколу NAT, чтобы определить, к каким IP адресам должен применяться NAT.

## Обработка входящего и исходящего трафика.

- Входящий ACL фильтрует пакеты, приходящие на определенный интерфейс, до выполнения маршрутизации. Таким образом сохраняются ресурсы на поиск маршрута, если пакет сбрасывается правилом.
- Исходящий ACL фильтрует пакеты после их маршрутизации — вне зависимости от входящего интерфейса.

## Стандартые и расширенные списки ACL

- Стандартные списки ACL- ACL фильтруют только на уровне 3, используя только адрес источника IPv4. 
- Расширенные списки ACL- фильтр ACL на уровне 3 с
использованием адреса IPv4 источника и/или назначения. Они также могут фильтровать на уровне 4, используя порты TCP, UDP и дополнительную информацию о типе протокола для более точного управления.

## Использование шаблонных (обратных) масок в ACL-списке.

IPv4 ACE использует 32-разрядную шаблонную маску, чтобы определить, какие биты адреса необходимо проверить на соответствие.
Cisco IOS предоставляет два ключевых слова для определения наиболее распространенных видов применения маскировки подстановочных знаков.

Два ключевых слова:
- host - применяется для маски 0.0.0.0. Эта маска подразумевает соответствие всех битов IPv4-адреса. Таким образом, фильтруется единственный адрес хоста.
- any - замещает маску 255.255.255.255 Эта маска указывает игнорировать весь IPv4-адрес или принять любой адрес.
